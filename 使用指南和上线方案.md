# ğŸ“š CMSå†…å®¹åˆ›ä½œå¹³å° - å®Œæ•´ä½¿ç”¨æŒ‡å—å’Œä¸Šçº¿æ–¹æ¡ˆ

## ğŸ¯ å¹³æ—¶ä½¿ç”¨æ–¹å¼

### 1. æ—¥å¸¸å¯åŠ¨æµç¨‹

#### Windowsç”¨æˆ·ï¼ˆæœ€ç®€å•ï¼‰
```bash
# æ–¹å¼ä¸€ï¼šåŒå‡»è¿è¡Œ
start-web-server.bat

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
cd cms-content-creator
npm install
npm run build:web
npm run server:start
```

#### Mac/Linuxç”¨æˆ·
```bash
cd cms-content-creator
npm install
npm run build:web && npm run server:start
```

### 2. è®¿é—®åœ°å€
- **æœ¬åœ°ä½¿ç”¨**: http://localhost:3000
- **å±€åŸŸç½‘ä½¿ç”¨**: http://ä½ çš„IPåœ°å€:3000 (å¦‚ http://192.168.1.91:3000)

### 3. æ ¸å¿ƒåŠŸèƒ½ä½¿ç”¨æµç¨‹

#### ğŸ“¦ äº§å“ç®¡ç†
1. **æ·»åŠ äº§å“**:
   - ç‚¹å‡»å·¦ä¾§èœå•ã€Œäº§å“ç®¡ç†ã€
   - ç‚¹å‡»ã€Œæ·»åŠ äº§å“ã€æŒ‰é’®
   - å¡«å†™äº§å“åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€ä»·æ ¼ã€æè¿°ç­‰ï¼‰
   - é€‰æ‹©åˆ†ç±»ï¼ˆæ”¯æŒä¸‰çº§åˆ†ç±»ï¼‰
   - ä¸Šä¼ äº§å“å›¾ç‰‡
   - æ·»åŠ äº§å“å‚æ•°
   - ä¿å­˜äº§å“

2. **ç¼–è¾‘äº§å“**:
   - åœ¨äº§å“åˆ—è¡¨ä¸­ç‚¹å‡»äº§å“å¡ç‰‡
   - ä¿®æ”¹äº§å“ä¿¡æ¯
   - è‡ªåŠ¨ä¿å­˜æ›´æ”¹

3. **æ‰¹é‡æ“ä½œ**:
   - é€‰æ‹©å¤šä¸ªäº§å“è¿›è¡Œæ‰¹é‡ç¼–è¾‘
   - æ‰¹é‡å¯¼å‡ºäº§å“æ•°æ®
   - æ‰¹é‡åˆ é™¤äº§å“

#### ğŸ“ å†…å®¹ç¼–è¾‘
1. **å¯Œæ–‡æœ¬ç¼–è¾‘**:
   - ä½¿ç”¨å†…ç½®ç¼–è¾‘å™¨ç¼–å†™äº§å“æè¿°
   - æ”¯æŒå›¾ç‰‡ã€è¡¨æ ¼ã€é“¾æ¥ç­‰å¯Œåª’ä½“
   - å®æ—¶é¢„è§ˆæ•ˆæœ

2. **æ¨¡æ¿ä½¿ç”¨**:
   - é€‰æ‹©é¢„è®¾æ¨¡æ¿å¿«é€Ÿåˆ›å»ºå†…å®¹
   - è‡ªå®šä¹‰æ¨¡æ¿å¹¶ä¿å­˜
   - æ‰¹é‡åº”ç”¨æ¨¡æ¿åˆ°å¤šäº§å“

#### ğŸ“Š å›¾è¡¨ç”Ÿæˆ
1. **æ•°æ®å¯è§†åŒ–**:
   - ä¸Šä¼ äº§å“æ•°æ®è¡¨æ ¼
   - é€‰æ‹©å›¾è¡¨ç±»å‹ï¼ˆæŸ±çŠ¶å›¾ã€é¥¼å›¾ã€æŠ˜çº¿å›¾ç­‰ï¼‰
   - è‡ªå®šä¹‰å›¾è¡¨æ ·å¼å’Œé…è‰²
   - å¯¼å‡ºå›¾è¡¨æˆ–åµŒå…¥æ–‡ç« 

#### ğŸ“ ç´ æç®¡ç†
1. **ç´ æåº“**:
   - ä¸Šä¼ å¹¶ç®¡ç†å›¾ç‰‡ã€æ–‡æ¡£ç­‰ç´ æ
   - åˆ†ç±»å­˜å‚¨ç´ æ
   - åœ¨ç¼–è¾‘æ—¶å¿«é€Ÿé€‰æ‹©ç´ æ

### 4. å¤šäººåä½œä½¿ç”¨

#### å®æ—¶åä½œ
- **å¤šäººåŒæ—¶ä½¿ç”¨**: æ”¯æŒå¤šäººåŒæ—¶ç™»å½•ä½¿ç”¨
- **å®æ—¶åŒæ­¥**: ä¸€äººä¿®æ”¹æ•°æ®ï¼Œå…¶ä»–äººç•Œé¢è‡ªåŠ¨æ›´æ–°
- **é¿å…å†²çª**: å»ºè®®ä¸åŒäººç¼–è¾‘ä¸åŒäº§å“ï¼Œé¿å…æ•°æ®å†²çª

#### å›¢é˜Ÿå·¥ä½œæµç¨‹
1. **åˆ†å·¥æ˜ç¡®**: 
   - äº§å“å½•å…¥å‘˜ï¼šè´Ÿè´£æ·»åŠ åŸºç¡€äº§å“ä¿¡æ¯
   - å†…å®¹ç¼–è¾‘ï¼šè´Ÿè´£å®Œå–„äº§å“æè¿°å’Œè¥é”€å†…å®¹
   - å›¾è¡¨è®¾è®¡å¸ˆï¼šè´Ÿè´£æ•°æ®å¯è§†åŒ–å’Œå›¾è¡¨åˆ¶ä½œ
   
2. **ç‰ˆæœ¬æ§åˆ¶**:
   - æ•°æ®è‡ªåŠ¨ä¿å­˜ç‰ˆæœ¬
   - å¯æŸ¥çœ‹æ“ä½œå†å²
   - æ”¯æŒæ•°æ®å›æ»š

## ğŸš€ ä¸Šçº¿æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šå±€åŸŸç½‘å†…éƒ¨ç½²ï¼ˆæ¨èç”¨äºå°å›¢é˜Ÿï¼‰

#### ç‰¹ç‚¹
- âœ… éƒ¨ç½²ç®€å•ï¼Œæˆæœ¬ä½
- âœ… æ•°æ®å®‰å…¨ï¼Œå†…ç½‘è®¿é—®
- âœ… å“åº”é€Ÿåº¦å¿«
- âŒ ä»…é™å±€åŸŸç½‘è®¿é—®
- âŒ éœ€è¦å›ºå®šæœåŠ¡å™¨ç”µè„‘

#### éƒ¨ç½²æ­¥éª¤
1. **é€‰æ‹©æœåŠ¡å™¨ç”µè„‘**:
   - é€‰æ‹©é…ç½®è¾ƒå¥½çš„ç”µè„‘ä½œä¸ºæœåŠ¡å™¨
   - ç¡®ä¿ç”µè„‘é•¿æœŸå¼€æœº
   - å»ºè®®ä½¿ç”¨æœ‰çº¿ç½‘ç»œè¿æ¥

2. **ç½‘ç»œé…ç½®**:
```bash
# 1. è·å–æœåŠ¡å™¨IPåœ°å€
ipconfig  # Windows
ifconfig  # Mac/Linux

# 2. é…ç½®é˜²ç«å¢™
# Windows: å…è®¸Node.jsé€šè¿‡é˜²ç«å¢™
# æ§åˆ¶é¢æ¿ â†’ ç³»ç»Ÿå’Œå®‰å…¨ â†’ Windows Defenderé˜²ç«å¢™ â†’ å…è®¸åº”ç”¨é€šè¿‡é˜²ç«å¢™

# 3. è®¾ç½®å›ºå®šIPï¼ˆå¯é€‰ï¼‰
# åœ¨è·¯ç”±å™¨ç®¡ç†é¡µé¢è®¾ç½®MACåœ°å€ç»‘å®šIP
```

3. **å¯åŠ¨æœåŠ¡**:
```bash
# åœ¨æœåŠ¡å™¨ç”µè„‘è¿è¡Œ
cd cms-content-creator
npm run build:web
npm run server:start
```

4. **å›¢é˜Ÿè®¿é—®**:
   - å›¢é˜Ÿæˆå‘˜é€šè¿‡ http://æœåŠ¡å™¨IP:3000 è®¿é—®
   - æ‰‹æœºç«¯å¯æ·»åŠ åˆ°ä¸»å±å¹•ï¼ŒåƒAPPä¸€æ ·ä½¿ç”¨

### æ–¹æ¡ˆäºŒï¼šäº‘æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæ¨èç”¨äºæ­£å¼å•†ç”¨ï¼‰

#### ç‰¹ç‚¹
- âœ… å…¨ç½‘è®¿é—®ï¼Œä¸å—åœ°åŸŸé™åˆ¶
- âœ… ç¨³å®šæ€§é«˜ï¼Œ24å°æ—¶åœ¨çº¿
- âœ… å¯é…ç½®åŸŸåå’ŒHTTPS
- âŒ éœ€è¦æœåŠ¡å™¨æˆæœ¬
- âŒ éœ€è¦ä¸€å®šæŠ€æœ¯åŸºç¡€

#### è¯¦ç»†éƒ¨ç½²æ­¥éª¤

##### 1. è´­ä¹°äº‘æœåŠ¡å™¨
```
æ¨èé…ç½®ï¼š
- CPU: 2æ ¸å¿ƒä»¥ä¸Š
- å†…å­˜: 2GBä»¥ä¸Š
- ç¡¬ç›˜: 20GBä»¥ä¸ŠSSD
- å¸¦å®½: 1Mbpsä»¥ä¸Š
- ç³»ç»Ÿ: Ubuntu 20.04 LTS

æ¨èæœåŠ¡å•†ï¼š
- é˜¿é‡Œäº‘ECS
- è…¾è®¯äº‘CVM  
- åä¸ºäº‘ECS
- ç™¾åº¦äº‘BCC
```

##### 2. æœåŠ¡å™¨ç¯å¢ƒé…ç½®
```bash
# è¿æ¥æœåŠ¡å™¨
ssh root@ä½ çš„æœåŠ¡å™¨IP

# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å®‰è£…Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
apt-get install -y nodejs

# å®‰è£…Git
apt install git -y

# å®‰è£…PM2ï¼ˆè¿›ç¨‹ç®¡ç†å™¨ï¼‰
npm install -g pm2

# å®‰è£…Nginxï¼ˆåå‘ä»£ç†ï¼‰
apt install nginx -y
```

##### 3. éƒ¨ç½²åº”ç”¨
```bash
# å…‹éš†é¡¹ç›®åˆ°æœåŠ¡å™¨
git clone https://github.com/your-repo/cms-content-creator.git
cd cms-content-creator

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
nano .env

# ç¼–è¾‘.envæ–‡ä»¶å†…å®¹ï¼š
PORT=3000
NODE_ENV=production
HOST=0.0.0.0
# å…¶ä»–é…ç½®...

# æ„å»ºåº”ç”¨
npm run build:web

# åˆ›å»ºä¸Šä¼ ç›®å½•
mkdir -p uploads/{images,documents,other}
mkdir -p data

# è®¾ç½®æƒé™
chown -R www-data:www-data uploads/
chmod -R 755 uploads/
```

##### 4. é…ç½®Nginxåå‘ä»£ç†
```bash
# åˆ›å»ºNginxé…ç½®æ–‡ä»¶
nano /etc/nginx/sites-available/cms-content-creator

# é…ç½®å†…å®¹ï¼š
server {
    listen 80;
    server_name ä½ çš„åŸŸå.com;  # æ›¿æ¢ä¸ºä½ çš„åŸŸå
    
    client_max_body_size 50M;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
    
    # WebSocketæ”¯æŒ
    location /socket.io/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# å¯ç”¨ç½‘ç«™é…ç½®
ln -s /etc/nginx/sites-available/cms-content-creator /etc/nginx/sites-enabled/

# æµ‹è¯•Nginxé…ç½®
nginx -t

# é‡å¯Nginx
systemctl restart nginx
```

##### 5. ä½¿ç”¨PM2ç®¡ç†è¿›ç¨‹
```bash
# åˆ›å»ºPM2é…ç½®æ–‡ä»¶
nano ecosystem.config.js

# é…ç½®å†…å®¹ï¼š
module.exports = {
  apps: [{
    name: 'cms-content-creator',
    script: 'server/index.js',
    cwd: '/root/cms-content-creator',
    instances: 1,
    exec_mode: 'fork',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    error_file: './logs/app-error.log',
    out_file: './logs/app-out.log',
    log_file: './logs/app-combined.log',
    time: true
  }]
}

# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir logs

# å¯åŠ¨åº”ç”¨
pm2 start ecosystem.config.js

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

##### 6. é…ç½®HTTPSï¼ˆå¯é€‰ä½†æ¨èï¼‰
```bash
# å®‰è£…Certbot
apt install certbot python3-certbot-nginx -y

# ç”³è¯·SSLè¯ä¹¦
certbot --nginx -d ä½ çš„åŸŸå.com

# è‡ªåŠ¨ç»­æœŸ
crontab -e
# æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
0 12 * * * /usr/bin/certbot renew --quiet
```

##### 7. åŸŸåé…ç½®
1. åœ¨åŸŸåæœåŠ¡å•†æ§åˆ¶å°æ·»åŠ Aè®°å½•
2. è®°å½•ç±»å‹ï¼šA
3. ä¸»æœºè®°å½•ï¼š@ï¼ˆæˆ–wwwï¼‰
4. è®°å½•å€¼ï¼šä½ çš„æœåŠ¡å™¨IPåœ°å€
5. TTLï¼š10åˆ†é’Ÿ

### æ–¹æ¡ˆä¸‰ï¼šDockerå®¹å™¨åŒ–éƒ¨ç½²ï¼ˆæ¨èç”¨äºä¸“ä¸šå›¢é˜Ÿï¼‰

#### åˆ›å»ºDockerfile
```dockerfile
# åˆ›å»ºDockerfile
FROM node:18-alpine

WORKDIR /app

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json ./

# å®‰è£…ä¾èµ–
RUN npm ci --only=production

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»ºå‰ç«¯
RUN npm run build:web

# åˆ›å»ºå¿…è¦ç›®å½•
RUN mkdir -p data uploads/{images,documents,other}

# è®¾ç½®æƒé™
RUN chown -R node:node /app

USER node

EXPOSE 3000

CMD ["node", "server/index.js"]
```

#### Docker Composeé…ç½®
```yaml
# docker-compose.yml
version: '3.8'
services:
  cms-app:
    build: .
    ports:
      - "3000:3000"
    volumes:
      - ./data:/app/data
      - ./uploads:/app/uploads
    environment:
      - NODE_ENV=production
      - PORT=3000
    restart: unless-stopped
```

#### éƒ¨ç½²å‘½ä»¤
```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

## ğŸ“± ç§»åŠ¨ç«¯è®¿é—®ä¼˜åŒ–

### PWAé…ç½®ï¼ˆç±»ä¼¼åŸç”ŸAPPä½“éªŒï¼‰
1. **æ·»åŠ manifest.json**ï¼ˆå·²é…ç½®ï¼‰
2. **Service Worker**ï¼ˆå·²é…ç½®ï¼‰
3. **ç”¨æˆ·æ“ä½œ**:
   - æ‰‹æœºæµè§ˆå™¨è®¿é—®ç½‘ç«™
   - é€‰æ‹©"æ·»åŠ åˆ°ä¸»å±å¹•"
   - åƒåŸç”ŸAPPä¸€æ ·ä½¿ç”¨

### å“åº”å¼ä¼˜åŒ–
- å·²é€‚é…æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘å¤šç«¯
- æ”¯æŒè§¦æ‘¸æ“ä½œ
- ç•Œé¢è‡ªé€‚åº”å±å¹•å°ºå¯¸

## ğŸ”§ ç»´æŠ¤å’Œç›‘æ§

### æ—¥å¸¸ç»´æŠ¤
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs cms-content-creator

# é‡å¯æœåŠ¡
pm2 restart cms-content-creator

# æ•°æ®åº“å¤‡ä»½
cp data/cms_content.db data/backup_$(date +%Y%m%d_%H%M%S).db

# æ¸…ç†æ—¥å¿—
pm2 flush
```

### ç›‘æ§æŒ‡æ ‡
- æœåŠ¡å™¨CPUã€å†…å­˜ä½¿ç”¨ç‡
- æ•°æ®åº“æ–‡ä»¶å¤§å°
- ä¸Šä¼ æ–‡ä»¶å ç”¨ç©ºé—´
- ç”¨æˆ·è®¿é—®é‡ç»Ÿè®¡

### æ€§èƒ½ä¼˜åŒ–
1. **æ•°æ®åº“ä¼˜åŒ–**:
   - å®šæœŸæ¸…ç†æ— ç”¨æ•°æ®
   - æ·»åŠ å¿…è¦ç´¢å¼•
   - æ•°æ®åˆ†é¡µåŠ è½½

2. **æ–‡ä»¶ç®¡ç†**:
   - å›¾ç‰‡è‡ªåŠ¨å‹ç¼©
   - å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶
   - CDNåŠ é€Ÿé™æ€èµ„æº

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

### 1. é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆ
- **ä¸ªäººæˆ–å°å›¢é˜Ÿï¼ˆ5äººä»¥ä¸‹ï¼‰**: å±€åŸŸç½‘éƒ¨ç½²
- **ä¸­å°ä¼ä¸šï¼ˆ5-50äººï¼‰**: äº‘æœåŠ¡å™¨éƒ¨ç½²
- **å¤§å‹ä¼ä¸šï¼ˆ50äººä»¥ä¸Šï¼‰**: Dockeré›†ç¾¤éƒ¨ç½²

### 2. å®‰å…¨å»ºè®®
- å®šæœŸæ›´æ–°ä¾èµ–åŒ…
- è®¾ç½®å¼ºå¯†ç 
- å¼€å¯HTTPS
- å®šæœŸå¤‡ä»½æ•°æ®

### 3. ä½¿ç”¨å»ºè®®
- åˆ¶å®šæ•°æ®å½•å…¥è§„èŒƒ
- å®šæœŸæ•´ç†å’Œæ¸…ç†æ•°æ®
- åŸ¹è®­å›¢é˜Ÿæˆå‘˜ä½¿ç”¨æ–¹æ³•
- å»ºç«‹æ•°æ®å¤‡ä»½æœºåˆ¶

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

1. **æ— æ³•è®¿é—®ç½‘ç«™**
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 status
systemctl status nginx

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep :3000
netstat -tlnp | grep :80

# æ£€æŸ¥é˜²ç«å¢™
ufw status
```

2. **æ•°æ®åº“é”™è¯¯**
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
ls -la data/
chmod 644 data/cms_content.db

# é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
rm data/cms_content.db
pm2 restart cms-content-creator
```

3. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
```bash
# æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™
ls -la uploads/
chmod -R 755 uploads/
chown -R www-data:www-data uploads/
```

4. **å†…å­˜ä¸è¶³**
```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h
pm2 monit

# é‡å¯åº”ç”¨é‡Šæ”¾å†…å­˜
pm2 restart cms-content-creator
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ—¥å¿—æ”¶é›†
åœ¨åé¦ˆé—®é¢˜æ—¶ï¼Œè¯·æä¾›ï¼š
1. é”™è¯¯æˆªå›¾
2. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
3. æœåŠ¡å™¨æ—¥å¿—ï¼š`pm2 logs cms-content-creator`
4. ç³»ç»Ÿç¯å¢ƒä¿¡æ¯

### è”ç³»æ–¹å¼
- ğŸ“§ æŠ€æœ¯æ”¯æŒé‚®ç®±
- ğŸ’¬ åœ¨çº¿å®¢æœ
- ğŸ“± æŠ€æœ¯æ”¯æŒç¾¤

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœéœ€è¦æŠ€æœ¯æ”¯æŒï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚** ğŸ‰ 